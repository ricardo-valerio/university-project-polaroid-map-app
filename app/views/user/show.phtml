<?php $this->flashSession->output(); ?>

<div class="row" style="margin-top: 37px;">
	<div class="large-4 columns text-center panel">
		<div class="row text-center">
			<div class="large-6 text-left small-6 columns">
				<h4><?php echo $user_info->username; ?> </h4>
			</div>
			<div class="large-6 small-6 text-right columns">
				<i class="fi-flag"></i>
			</div>
		</div>
		<img
			src="http://www.gravatar.com/avatar/<?php echo md5(strtolower(trim($user_info->email))); ?>?s=250">
	</div>
	<div class="large-8 columns">
		<div class="panel radius">
			<div class="row">
				<div class="large-12 columns text-center">
					<?php if ($user_info->full_name): ?>
						<h4><?php echo $user_info->full_name; ?></h4>
						<hr>
					<?php endif ?>
				<h5 class="subheader">
					<div class="row collapse">
						<?php if ($user_info->facebook_username): ?>
							<div class="small-12 columns">
								<a href="https://facebook.com/<?php echo $user_info->facebook_username; ?>"><span style="background-color: #46629E; color:
									white;"
									      class="prefix">facebook.com/<?php echo $user_info->facebook_username; ?></span></a>
							</div>
						<?php endif ?>
						<?php if ($user_info->twitter_username): ?>

						<div class="small-12 columns">
							<a href="https://twitter.com/<?php echo $user_info->twitter_username; ?>"><span style="background-color: #55ACEE; color:
								white;" class="prefix">twitter.com/<?php echo $user_info->twitter_username; ?></span></a>
						</div>
						<?php endif ?>
						<?php if ($user_info->google_plus_username): ?>
						<div class="small-12 columns">
							<a href="https://plus.google.com/<?php echo $user_info->google_plus_username; ?>"><span style="background-color: #D73D32; color:
								white;" class="prefix">plus.google.com/<?php echo $user_info->google_plus_username; ?></span></a>
						</div>
						<?php endif ?>
					</div>
				</h5>
				</div>
			</div>
		</div>
		<?php if ($user_info->bio): ?>
			<div class="panel radius">
				<div class="row">
					<div class="large-12 columns text-center">
						<?php echo $user_info->bio; ?>
					</div>
				</div>
			</div>
		<?php endif ?>
	</div>
</div>


<div class="row panel">
	<ul class="button-group even-2">
		<li>
			<a data-reveal-id="show-user-polaroids" href="#" class="button">
				<i style="font-size: 20px;"
				   class="fi-camera"></i> Polaroids
			</a>
		</li>
		<li>
			<a data-reveal-id="show-user-routes" href="#" class="button">
				<i style="font-size: 20px;"
				   class="fi-address-book"></i> Routes
			</a>
		</li>
	</ul>
</div>

<!-- modal para as polaroids-->
<div id="show-user-polaroids" class="reveal-modal" data-reveal
     aria-labelledby="Polaroids" aria-hidden="true" role="dialog">
	<h2 class="text-center" id="Polaroids"><?php echo $user_info->username;
		?>'s Polaroids!</h2>

	<div style="margin-top: 2em;" class="row">
	    <div id="container" class="large-12 columns transitions-enabled large-centered clearfix">

	    <?php foreach ($user_polaroids as $user_polaroid): ?>
	        <div class="box col3">
	            <div class="thumbnail">
	                <a href="<?php echo $this->url->get("/polaroid/" . $user_polaroid->id . "/" .
	            $this->tag->friendlyTitle($user_polaroid->title, "-")); ?>">
	                <img class="img-rounded BarnieFonte" src="/polaroid-map-app/public/img/polaroids/<?php echo $user_polaroid->photo_hash_file_name; ?>">
	                </a>
	                <div class="caption text-center BarnieFonte">
	                    <h3 style="font-size: 1.5em;" class="BarnieFonte"><?php echo $user_polaroid->title; ?></h3>
	                    <p style="margin-bottom: -0.75rem; border-top: 0.1px solid rgba(128, 128, 128, 0.2); padding-top: 5px;"><?php echo date("F j, Y", strtotime($user_polaroid->datetime_created)); ?></p> </div>
	            </div>
	        </div>
	    <?php endforeach ?>

	    </div>
	</div>

</div>


	<!-- modal para as routes -->
	<div id="show-user-routes" class="reveal-modal text-center" data-reveal
	     aria-labelledby="Routes" aria-hidden="true" role="dialog">
		<h2 class="text-center" id="Routes"><?php echo $user_info->username; ?>
			's Routes</h2>

		<?php if ($number_of_user_routes): ?>

			<?php foreach ($user_routes as $user_route): ?>

				<div class="panel">
					<h4><?php echo $user_route->title; ?></h4>

					<div class="row">
						<div class="large-9 columns">
							<p><?php echo $user_route->description; ?></p>
						</div>
						<div class="large-3 columns">
							<a href="<?php echo $this->url->get("/route/" . $user_route->id . "/" .
								$this->tag->friendlyTitle($user_route->title, "-")); ?>"
							   class="radius button right"><i
									class="fi-eye"></i></a>
						</div>
					</div>
				</div>

			<?php endforeach ?>

		<?php else: ?>
			<p>This User has no routes yet!</p>
		<?php endif ?>

		<a class="close-reveal-modal" aria-label="Close">&#215;</a>
	</div>

</div>
<?php if($this->session->has("auth") && $user_info->id != $this->session->get("auth")["id"] ): ?>


<?php if ($user_follows_user_or_not): ?>

	<div class="row panel">
			<form action="<?php echo("/polaroid-map-app/unfollow-user"); ?>"
			      method="post">

				<input type="hidden"
				       name="<?php echo $this->security->getTokenKey(); ?>"
				       value="<?php echo $this->security->getToken(); ?>">

				<input type="hidden" name="user_to_unfollow_id"
				       value="<?php echo $user_info->id;
				       ?>"/>

				<button type="submit" id="unfollowUserButton"
				        class="button expand alert round">
					<i style="font-size: 20px;"
					   class="fi-like"></i> Unfollow
				</button>
			</form>
	</div>

<?php else: ?>

	<div class="row panel">
			<form action="<?php echo("/polaroid-map-app/follow-user"); ?>"
			      method="post">

				<input type="hidden"
				       name="<?php echo $this->security->getTokenKey(); ?>"
				       value="<?php echo $this->security->getToken(); ?>">

				<input type="hidden" name="user_to_follow_id"
				       value="<?php echo $user_info->id;
				       ?>"/>

				<button type="submit" id="followUserButton"
				        class="button expand success round">
					<i style="font-size: 20px;"
					   class="fi-like"></i> Follow
				</button>
			</form>
	</div>

<?php endif ?>


<?php endif ?>

<?php if(!$this->session->has("auth")): ?>

	<div class="row panel text-center">
				<a href="<?php echo $this->url->get("/sign-in-up?return_to="
					. $this->router->getRewriteUri()); ?>"
				   class="button expand warning">
					<i style="font-size: 20px;"
					   class="fi-like"></i> Login to Follow <?php echo $user_info->username; ?>!
				</a>
	</div>

<?php endif ?>

